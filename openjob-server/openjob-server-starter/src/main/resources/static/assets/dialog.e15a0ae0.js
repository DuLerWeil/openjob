import{u as C}from"./vue-i18n.cjs.f888bd5c.js";import{u as S}from"./index.3a59200e.js";import{h as F,r as h,K as B,a9 as s,j as f,k as T,D as o,x as a,l as N,B as b,C as z,u as x,v as A,A as R}from"./vue.543fafcc.js";import{_ as U}from"./_plugin-vue_export-helper.c27b6911.js";import"./_commonjsHelpers.35101cd5.js";import"./request.b1530b7c.js";import"./storage.b628b270.js";import"./index.4ac74e37.js";import"./index.070d5527.js";import"./index.3b68140d.js";const j={class:"system-role-dialog-container"},K={class:"dialog-footer"},M=F({name:"systemRoleDialog"}),P=F({...M,emits:["refresh"],setup($,{expose:y,emit:V}){const{t}=C(),u=S(),r=h(),e=B({ruleForm:{id:0,name:"",uniqueId:""},menuData:[],menuProps:{children:"children",label:"label"},rules:{name:{required:!0,message:t("message.commonMsg.emptyInput")+t("message.namespace.name"),trigger:"blur"}},dialog:{isShowDialog:!1,type:"",title:"",submitTxt:""}}),D=(n,l)=>{var i;(i=r.value)==null||i.clearValidate(),n==="update"?(e.ruleForm.name=l.name,e.ruleForm.uniqueId=l.uniqueId,e.ruleForm.id=l.id,e.dialog.title=t("message.namespace.editTitle"),e.dialog.submitTxt=t("message.commonBtn.update")):(e.ruleForm.name="",e.ruleForm.uniqueId="",e.dialog.title=t("message.namespace.addTitle"),e.dialog.submitTxt=t("message.commonBtn.add")),e.dialog.type=n,e.dialog.isShowDialog=!0},d=()=>{e.dialog.isShowDialog=!1},v=()=>{d()},I=async n=>{!n||await n.validate(l=>{if(l)w();else return!1})},w=async()=>{e.dialog.type==="update"?await u.update({id:e.ruleForm.id,name:e.ruleForm.name}):await u.add({name:e.ruleForm.name}),d(),V("refresh")};return y({openDialog:D}),(n,l)=>{const i=s("el-input"),p=s("el-form-item"),c=s("el-col"),_=s("el-row"),q=s("el-form"),g=s("el-button"),k=s("el-dialog");return f(),T("div",j,[o(k,{title:e.dialog.title,modelValue:e.dialog.isShowDialog,"onUpdate:modelValue":l[3]||(l[3]=m=>e.dialog.isShowDialog=m),width:"769px"},{footer:a(()=>[N("span",K,[o(g,{onClick:v,size:"default"},{default:a(()=>[b("取 消")]),_:1}),o(g,{type:"primary",onClick:l[2]||(l[2]=m=>I(r.value)),size:"default"},{default:a(()=>[b(z(e.dialog.submitTxt),1)]),_:1})])]),default:a(()=>[o(q,{ref_key:"nsDialogFormRef",ref:r,model:e.ruleForm,rules:e.rules,size:"default"},{default:a(()=>[o(_,null,{default:a(()=>[o(c,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[o(p,{label:x(t)("message.namespace.name"),prop:"name"},{default:a(()=>[o(i,{modelValue:e.ruleForm.name,"onUpdate:modelValue":l[0]||(l[0]=m=>e.ruleForm.name=m),clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),o(_,null,{default:a(()=>[e.dialog.type==="update"?(f(),A(c,{key:0,xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[o(p,{label:x(t)("message.namespace.uniqueId"),prop:"uniqueId"},{default:a(()=>[o(i,{modelValue:e.ruleForm.uniqueId,"onUpdate:modelValue":l[1]||(l[1]=m=>e.ruleForm.uniqueId=m),clearable:"",disabled:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})):R("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});const Z=U(P,[["__scopeId","data-v-8e0ec283"]]);export{Z as default};
