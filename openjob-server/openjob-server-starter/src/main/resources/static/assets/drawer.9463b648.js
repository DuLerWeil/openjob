import{_ as D}from"./preload-helper.101896b7.js";import{u as V}from"./vue-i18n.cjs.f888bd5c.js";import{g as y}from"./data.db8b6d88.js";import{u as B}from"./index.ccbc1bbf.js";import{ay as j}from"./index.070d5527.js";import{h,ap as E,K as b,a9 as p,j as L,v as z,x as s,D as o,u as l,B as c,C as m,l as w}from"./vue.543fafcc.js";import"./_commonjsHelpers.35101cd5.js";import"./index.7038595c.js";import"./request.b1530b7c.js";import"./storage.b628b270.js";import"./index.4ac74e37.js";import"./index.3b68140d.js";import"./header.9390c1c5.js";import"./index.05309dac.js";import"./index.18e5bded.js";import"./themeConfig.084d7f79.js";const N={class:"system-role-dialog-container",style:{padding:"10px",height:"100%"}},P={style:{flex:"auto","text-align":"left","padding-left":"30px","padding-bottom":"10px"}},M=h({name:"jobDrawerName"}),se=h({...M,setup(O,{expose:v}){const T=E(()=>D(()=>import("./monaco.da9167a8.js").then(t=>t.a),["assets/monaco.da9167a8.js","assets/preload-helper.101896b7.js","assets/vue.543fafcc.js","assets/monaco.82344604.css"])),{t:r}=V(),I=B(),e=b({editor:{editorStyle:"width: 100%;height: 100%;",language:"shell",value:""},drawer:{isShow:!1},descriptions:{column:6,workerAddress:"",createTime:"",completeTime:"",statusTag:"",statusLabel:"Default"}}),a=b({timerId:0,time:0,counter:0}),x=async t=>{e.descriptions.workerAddress=t.workerAddress,e.descriptions.createTime=t.createTime,e.descriptions.completeTime=t.completeTime,e.descriptions.statusTag=y(t.status).tag,e.descriptions.statusLabel=y(t.status).label,e.drawer.isShow=!0,e.editor.value="",a.time=0,await f(t,!1,2)},f=async(t,n,d)=>{n&&(e.editor.value+=`
`);let _=30,i=await I.getProcessorList({taskId:t.taskId,status:t.status,time:a.time,loading:d,size:_});if(i.list.forEach(function(u){e.editor.value+=u+`
`}),i.time>0&&(a.time=i.time),i.complete!=1){if(i.list.length>0){setTimeout(async()=>{await f(t,!1,2)},500);return}a.timerId=setInterval(()=>{e.editor.value+=".",a.counter+=1,a.counter%6==0&&(clearInterval(a.timerId),f(t,!0,1))},500)}},k=()=>{clearInterval(a.timerId)},S=()=>{e.drawer.isShow=!1,clearInterval(a.timerId)},C=async()=>{j.success("更新成功")};return v({openDrawer:x}),(t,n)=>{const d=p("el-descriptions-item"),_=p("el-tag"),i=p("el-descriptions"),u=p("el-button"),A=p("el-drawer");return L(),z(A,{modelValue:e.drawer.isShow,"onUpdate:modelValue":n[0]||(n[0]=g=>e.drawer.isShow=g),direction:"rtl",size:"80%",onClose:n[1]||(n[1]=g=>k())},{header:s(()=>[o(i,{style:{"margin-top":"10px"},column:e.descriptions.column},{default:s(()=>[o(d,{label:l(r)("message.job.instance.workerAddress"),width:"260px",align:"left"},{default:s(()=>[c(m(e.descriptions.workerAddress),1)]),_:1},8,["label"]),o(d,{label:l(r)("message.job.instance.createTime"),width:"260px",align:"left"},{default:s(()=>[c(m(e.descriptions.createTime),1)]),_:1},8,["label"]),o(d,{label:l(r)("message.job.instance.completeTime"),width:"260px",align:"left"},{default:s(()=>[c(m(e.descriptions.completeTime),1)]),_:1},8,["label"]),o(d,{label:l(r)("message.job.instance.status"),width:"260px",align:"left"},{default:s(()=>[o(_,{class:"ml-2",type:e.descriptions.statusTag,size:"small"},{default:s(()=>[c(m(e.descriptions.statusLabel),1)]),_:1},8,["type"])]),_:1},8,["label"])]),_:1},8,["column"])]),default:s(()=>[w("div",N,[o(l(T),{ref:"JobParamsMonacoEditor",editorStyle:e.editor.editorStyle,language:e.editor.language,value:e.editor.value,readOnly:!0,scrollBottom:!0,syncValue:!0},null,8,["editorStyle","language","value"])])]),footer:s(()=>[w("div",P,[o(u,{type:"primary",onClick:C,size:"default"},{default:s(()=>[c(m(l(r)("message.commonBtn.confirm")),1)]),_:1}),o(u,{onClick:S,size:"default"},{default:s(()=>[c(m(l(r)("message.commonBtn.cancel")),1)]),_:1})])]),_:1},8,["modelValue"])}}});export{se as default};
